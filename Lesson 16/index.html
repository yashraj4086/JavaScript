<!DOCTYPE html>
<html>
<head>
  <title>Lesson 25 - Fetch API</title>
</head>
<body>
  <h2>Lesson 25: Fetch API - Getting Data from Server</h2>

  <button onclick="getUserData()">Get User Data</button>
  <button onclick="getPosts()">Get Posts</button>
  <button onclick="clearData()">Clear</button>
  
  <div id="apiData" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>

  <script>
    async function getUserData() {
      try {
        document.getElementById("apiData").innerHTML = "Loading...";
        
        // Free API for testing
        const response = await fetch('https://jsonplaceholder.typicode.com/users/1');
        
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        
        const user = await response.json();
        
        document.getElementById("apiData").innerHTML = 
          `<h3>User Information:</h3>
           <p><strong>Name:</strong> ${user.name}</p>
           <p><strong>Email:</strong> ${user.email}</p>
           <p><strong>Phone:</strong> ${user.phone}</p>
           <p><strong>Website:</strong> ${user.website}</p>`;
           
      } catch (error) {
        document.getElementById("apiData").innerHTML = 
          "Error fetching data: " + error.message;
      }
    }

    async function getPosts() {
      try {
        document.getElementById("apiData").innerHTML = "Loading posts...";
        
        const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=3');
        const posts = await response.json();
        
        let postsHTML = "<h3>Recent Posts:</h3>";
        posts.forEach(post => {
          postsHTML += `
            <div style="border: 1px solid #ddd; margin: 10px; padding: 10px;">
              <h4>${post.title}</h4>
              <p>${post.body.substring(0, 100)}...</p>
            </div>`;
        });
        
        document.getElementById("apiData").innerHTML = postsHTML;
        
      } catch (error) {
        document.getElementById("apiData").innerHTML = 
          "Error fetching posts: " + error.message;
      }
    }

    function clearData() {
      document.getElementById("apiData").innerHTML = "";
    }
  </script>
</body>
</html>